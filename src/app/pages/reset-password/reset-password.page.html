<ion-content [fullscreen]="true" class="reset-content">
  <div class="page-container">
    <div class="reset-container">
      <!-- Brand Section -->
      <div class="brand-section">
        <div class="logo-container">
          <ion-icon name="cube-outline" class="logo-icon"></ion-icon>
          <h1 class="app-title">StockMaster</h1>
        </div>
        <h2 class="reset-subtitle">Restablecer Contraseña</h2>
        <p class="reset-description">
          Ingresa tu email y te enviaremos instrucciones para restablecer tu contraseña
        </p>
      </div>

      <!-- Reset Form -->
      <ng-container *ngIf="!showSuccessMessage">
        <form class="reset-form" novalidate>
          <div class="form-group">
            <div class="input-container">
              <ion-icon name="mail-outline" class="input-icon"></ion-icon>
              <input 
                type="email" 
                class="form-input" 
                placeholder="Correo electrónico"
                [(ngModel)]="email"
                name="email"
                required>
            </div>
          </div>

          <button type="submit" class="reset-button" (click)="resetPassword()" [disabled]="!email">
            <span *ngIf="!isLoading">Enviar Instrucciones</span>
            <ion-spinner *ngIf="isLoading" name="crescent" color="light"></ion-spinner>
          </button>
        </form>
      </ng-container>

      <!-- Success Message -->
      <ng-container *ngIf="showSuccessMessage">
        <div class="success-container">
          <ion-icon name="checkmark-circle" class="success-icon"></ion-icon>
          <h3 class="success-title">¡Correo Enviado!</h3>
          <p class="success-message">
            Se han enviado las instrucciones para restablecer tu contraseña a <strong>{{email}}</strong>
          </p>
          <p class="success-note">
            Revisa tu bandeja de entrada y carpeta de spam.
          </p>
          
          <!-- Botón para regresar al login inmediatamente -->
          <button type="button" class="success-button" (click)="redirectToLogin()">
            Ir al Login
          </button>
          
          <p class="auto-redirect-note">
            Serás redirigido automáticamente en 5 segundos
          </p>
        </div>
      </ng-container>

      <!-- Auth Links -->
      <div class="auth-links">
        <div class="divider">
          <span>¿Recuerdas tu contraseña?</span>
        </div>
        <a routerLink="/login" class="login-link">
          <span class="login-text">Volver al Login</span>
        </a>
      </div>
    </div>
  </div>
</ion-content>